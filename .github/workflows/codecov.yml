name: Codecov coverage

on: [push,pull_request]

env:
  COMPILER: g++-6 
  VARIANT: debug 
  TOOLSET: gcc 
  CXXSTD: 11 
  B2_OPTIONS: "coverage=on"

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2 # Check out our repository

    - name: Install required packages 
      run: |
          sudo apt-get install libpng-dev
          sudo apt-get install libjpeg-dev
          sudo apt-get install libtiff5-dev
          sudo apt-get install libraw-dev
          sudo apt-get install lcov
          bash .ci/coverage.sh